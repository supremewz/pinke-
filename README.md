
# 拼课小程序需求文档

## 1. 产品定位与目标用户

**产品定位：** 基于地理位置的外教课程拼团学习平台，让家长就近找到优质外教课程，通过拼团降低学习成本。

**目标用户：**
- **主要用户：** 3-18岁学员家长（有外教学习需求，注重性价比）
- **次要用户：** 外教老师（提供课程服务，由管理员录入）
- **管理用户：** 平台运营人员、机构管理员

## 2. 核心业务模块重新设计

### 2.1 双层产品架构

#### 2.1.1 课程产品层（Course Product）- 外教/机构端
**定义：** 外教发布的标准化课程模板，包含课程框架和基础信息

**核心要素：**
- **课程信息：** 课程名称、描述、分类、适合年龄、难度等级、课程大纲
- **外教信息：** 外教资质、教学经验、评分、教学风格、个人介绍
- **价格体系：** 原价、线上拼团有优惠比例，发布课程时设定
- **时间模板：** 细粒度时间段（具体到每个时间段，如周六9-11点、周日14-16点）
- **地点范围：** 按北京市行政区域定义（如：海淀区、朝阳区、西城区、东城区、丰台区、石景山区、通州区、昌平区、大兴区、顺义区、房山区、门头沟区、平谷区、怀柔区、密云区、延庆区），可选择多个区域，也可选择具体上课地点
- **拼团设置：** 目标人数（2-8人）、拼团截止时间（可设置，1-10天可设置）
- **课程材料：** 教学大纲、预习资料、学习目标

**业务规则：**
- 外教信息由管理员录入和审核
- 课程产品一旦发布，核心信息不可随意更改

#### 2.1.2 拼课需求层（Group Buying Demand）- 家长端
**定义：** 家长基于某个课程产品，发起的具体拼团需求

**核心要素：**
- **基础课程：** 选择某个已发布的课程产品
- **具体时间：** 在外教可授课时间范围内，选择具体的上课时间
- **上课地点：** 在外教授课范围内，选择或建议具体地址
- **发起人信息：** 孩子年龄、英语水平、特殊需求等

**业务规则：**
- 拼团时间必须在外教可授课时间范围内
- 上课地点需在外教接受的区域范围内
- 拼团成功后，具体地点以发起拼课的用户当前位置为中心，也可后期由参与者协商微调
- 发起人需要预付费参与拼团

### 2.2 用户系统模块

#### 2.2.1 用户注册与认证
- **家长注册：** 微信快捷登录 → 获取手机号 → 完善孩子信息（年龄、英语水平、学习目标、常用地址）
- **外教管理：** 管理员后台录入外教信息，包括资质认证、授课范围、时间偏好等
- **位置服务：** 获取用户位置用于就近推荐，但不作为强制筛选条件

#### 2.2.2 用户权限边界
- **家长权限：** 浏览课程产品、发起拼课需求、参与他人拼团、管理订单
- **外教权限：** 通过管理后台查看课程安排、确认授课、提供课程反馈
- **管理员权限：** 发布课程产品、管理外教信息、处理订单、数据分析

### 2.3 拼团核心流程

#### 2.3.1 家长发起拼课流程
1. **选择课程产品** → 浏览外教发布的标准课程
2. **定制拼团需求** → 选择具体时间、地点
3. **预付费发起** → 支付费用，正式发起拼团
4. **等待参与者** → 规定时间内等待其他家长参与
5. **拼团结果** → 成功开课或失败退款

#### 2.3.2 家长参与拼团流程
1. **发现拼团需求** → 查看其他家长发起的拼团
2. **查看详情** → 了解课程、时间、地点、发起人信息
3. **一键参团** → 确认信息并支付费用
4. **等待开课** → 拼团成功后等待课程开始

#### 2.3.3 拼团状态管理
**状态定义：**
- **招募中：** 人数未满，在截止时间内
- **即将截止：** 距离截止时间不足6小时
- **拼团成功：** 达到最少人数（2-3人）且未超时
- **拼团失败：** 规定时间内未达到最少人数
- **课程确认：** 拼团成功后，外教确认授课安排
- **课程完成：** 课程结束，可进行评价

**业务规则：**
- 拼团时长：1-10天（发起人不可选择，在管理员发布课程时选择好）
- 最少成团人数：2-3人（降低门槛）
- 最多成团人数：6-8人（保证质量）
- 退款规则：拼团失败自动退款，成功后需联系客服
- 地点协商：拼团成功后，可联系管理员协助协商地点

### 2.4 订单与支付模块

#### 2.4.1 订单流程简化
**统一支付流程：**
1. 选择课程 → 2. 确认信息 → 3. 选择支付方式 → 4. 完成支付 → 5. 等待拼团结果

**订单状态：**
- 待拼团：已支付，等待其他人参与
- 拼团成功：达到人数，等待上课
- 拼团失败：未达到人数，已退款
- 课程完成：可评价和查看学习报告(暂时不实现)

#### 2.4.2 支付安全保障
- 资金托管：拼团成功前资金由平台托管
- 自动退款：拼团失败或课程取消自动原路退回
- 发票服务：支持开具电子发票(暂时不实现)

### 2.5 积分激励系统

#### 2.5.1 积分获取规则（防刷优化）
- **注册奖励：** 100积分（仅一次）
- **首次拼团：** 200积分（仅一次）
- **完成课程：** 50积分/次（需外教确认出勤，暂时不实现）
- **课程评价：** 20积分/次（仅限已完成课程，暂时不实现）
- **邀请新用户：** 1000积分/人（新用户完成首次拼团成功后发放）
- **分享拼团：** 500积分/人（用户拼团成功后发放）

#### 2.5.2 积分使用规则
- **抵扣比例：** 100积分=1元，单次最多抵扣订单金额的20%
- **兑换权益：** 
  - 500积分：优先报名权
  - 5000积分：免费试听课1次
- **积分有效期：** 3年，到期前1个月提醒使用

#### 2.5.3 防刷机制
- 同一设备每日积分获取上限200分
- 人工审核：大额积分变动需人工确认
- 黑名单机制：违规用户永久限制积分获取

### 2.6 消息通知系统（需求保留，暂时不实现）

#### 2.6.1 关键节点通知（需求保留，暂时不实现）
- **拼团进度：** 新人加入、即将截止、拼团成功/失败
- **课程提醒：** 开课前24小时、2小时提醒
- **系统消息：** 积分变动、优惠活动、政策更新
- **客服消息：** 退款处理、课程变更、问题回复

#### 2.6.2 通知方式（需求保留，暂时不实现）
- **小程序内消息：** 实时显示，支持历史查看
- **微信服务通知：** 关键节点推送（需用户授权）
- **短信通知：** 重要变更备用通知方式

## 3. 页面设计与用户体验

### 3.1 首页设计（核心页面）

#### 3.1.1 页面布局优先级
**第一优先级：一键参团列表**
- **位置：** 首页顶部核心区域
- **内容：** 展示"即将成团"的拼课需求（只差1-2人即可开课）
- **排序：** 按截止时间排序，最紧急的在前
- **展示信息：** 
  - 课程名称、外教头像、剩余人数
  - 倒计时显示（如：还剩18小时）
  - 上课时间、地点、价格
  - "立即参团"按钮（醒目颜色）

**第二优先级：发起拼课入口**
- **位置：** 首页中部显著位置
- **设计：** 大按钮设计，使用品牌色
- **文案：** "发起拼课" + 副标题"选择心仪课程，邀请小伙伴一起学"
- **功能：** 点击进入课程产品浏览页面

**第三优先级：精品课程推荐**
- **位置：** 首页下部
- **内容：** 热门课程产品展示
- **筛选：** 基于用户孩子年龄和历史浏览推荐
- **展示：** 外教信息、课程简介、价格区间

#### 3.1.2 用户心理设计
- **紧迫感营造：** 倒计时、"仅差X人"、"即将截止"等提示
- **从众心理：** 显示"已有X位家长参与"、参与者头像（脱敏）
- **信任建立：** 外教资质认证标识、用户评价星级
- **降低门槛：** 突出拼团优惠价格、"随时可退"保障

### 3.2 核心页面流程设计

#### 3.2.1 参与拼团流程（最短路径）
```
首页"一键参团"列表 
→ 点击感兴趣的拼团 
→ 拼团详情页（课程信息+参与者信息+支付）
→ 确认支付 
→ 支付成功页 
→ 等待拼团结果
```

#### 3.2.2 发起拼课流程
```
首页"发起拼课"按钮 
→ 课程产品列表页 
→ 选择课程产品 
→ 课程产品详情页 
→ 点击"发起拼课" 
→ 拼课设置页（时间+地点+人数）
→ 确认并支付 
→ 拼团发起成功页
```

#### 3.2.3 课程浏览流程
```
首页"精品课程"区域 
→ 课程产品列表页 
→ 筛选（年龄/价格/外教/时间）
→ 课程产品详情页 
→ 查看外教信息+课程大纲 
→ 发起拼课 或 查看现有拼团
```

### 3.3 关键页面详细设计

#### 3.3.1 拼团详情页
**页面目标：** 让用户快速决策是否参与拼团

**核心信息展示：**
- **拼团状态：** 进度条显示当前人数/目标人数
- **时间信息：** 上课时间、拼团截止倒计时
- **课程信息：** 课程名称、时长、适合年龄
- **外教信息：** 头像、姓名、资质、评分
- **地点信息：** 具体地址、距离、交通方式
- **价格信息：** 拼团价、原价、优惠金额
- **参与者信息：** 已参与家长信息（脱敏显示）

**操作按钮：**
- **主按钮：** "立即参团"（支付按钮）
- **次按钮：** "分享给朋友"、"收藏课程"

#### 3.3.2 课程产品详情页
**页面目标：** 展示课程完整信息，引导用户发起拼课

**核心信息展示：**
- **课程概览：** 名称、分类、适合年龄、难度等级
- **外教详情：** 详细介绍、教学经验、资质认证、学员评价
- **课程大纲：** 学习目标、课程内容、教学方法
- **价格体系：** 不同拼团人数对应的价格
- **时间地点：** 可选时间段、授课区域范围

**操作区域：**
- **主按钮：** "发起拼课"（醒目设计）
- **次按钮：** "查看现有拼团"（如果有的话）
- **辅助功能：** 收藏、分享、咨询客服

## 10. 小程序TabBar设计

### 10.1 TabBar结构设计（4个Tab）

基于拼课小程序的核心业务流程，我设计了以下4个TabBar页面：

#### Tab 1: 首页 (home)
**图标：** 🏠 首页
**核心功能：**
- **一键参团区域**：展示即将成团的拼课需求（最高优先级）
- **发起拼课入口**：醒目的发起拼课按钮
- **精品课程推荐**：基于用户偏好的课程产品推荐
- **快速筛选**：年龄段、北京市区域、时间快速筛选

**页面目标：** 
- 让用户快速发现即将成团的机会（利用紧迫感）
- 提供便捷的发起拼课入口
- 个性化推荐提高转化率

#### Tab 2: 拼课 (group)
**图标：** 👥 拼课  
**核心功能：**
- **热门拼团列表**：所有进行中的拼团需求
- **筛选功能**：按区域、时间、价格、课程类型筛选
- **拼团状态**：清晰显示每个拼团的进度和剩余时间
- **快速参团**：一键参与感兴趣的拼团

**页面目标：**
- 提供完整的拼团浏览体验
- 支持精确筛选找到合适的拼团
- 展示拼团的社交属性和紧迫感

#### Tab 3: 课程 (course)
**图标：** 📚 课程
**核心功能：**
- **课程产品列表**：所有外教发布的标准课程
- **外教筛选**：按外教资质、评分、教学风格筛选
- **课程详情**：完整的课程信息和外教介绍
- **发起拼课**：基于课程产品发起新的拼团

**页面目标：**
- 让用户深入了解课程内容和外教信息
- 提供发起拼课的完整流程
- 建立对课程质量和外教的信任

#### Tab 4: 我的 (user)
**图标：** 👤 我的
**核心功能：**
- **我的拼团**：参与的和发起的拼团状态
- **订单管理**：支付记录、退款申请
- **积分中心**：积分余额、获取记录、使用规则
- **个人设置**：孩子信息、常用地址、消息设置

**页面目标：**
- 提供完整的个人信息管理
- 清晰展示拼团和订单状态
- 激励用户通过积分系统持续使用

### 10.2 页面层级结构

```
TabBar页面 (4个)
├── 首页 (home)
│   ├── 拼团详情页 (group/detail)
│   ├── 课程详情页 (course/detail)  
│   └── 发起拼课页 (group/create)
│
├── 拼课 (group)
│   ├── 拼团详情页 (group/detail)
│   ├── 拼团筛选页 (group/filter)
│   └── 支付页面 (order/pay)
│
├── 课程 (course)  
│   ├── 课程详情页 (course/detail)
│   ├── 外教详情页 (teacher/detail)
│   ├── 发起拼课页 (group/create)
│   └── 课程筛选页 (course/filter)
│
└── 我的 (user)
    ├── 我的拼团 (user/groups)
    ├── 订单列表 (user/orders)
    ├── 积分中心 (user/points)
    ├── 个人设置 (user/settings)
    └── 消息中心 (user/messages)
```

### 10.3 用户流程优化

#### 10.3.1 参与拼团流程（最短路径）
```
首页 → 点击"即将成团"拼课 → 拼团详情页 → 立即支付 → 完成
(3步完成，最高效率)
```

#### 10.3.2 发起拼课流程
```
首页"发起拼课"按钮 → 课程列表 → 选择课程 → 课程详情 → 发起拼课设置 → 支付 → 完成
或
课程Tab → 浏览课程 → 课程详情 → 发起拼课设置 → 支付 → 完成
```

#### 10.3.3 课程浏览流程
```
课程Tab → 筛选课程 → 课程详情 → 查看外教信息 → 发起拼课或查看现有拼团
```

### 10.4 TabBar设计原则

#### 10.4.1 功能分离清晰
- **首页**：聚合最重要的信息，快速决策
- **拼课**：专注拼团浏览和参与
- **课程**：专注课程内容和发起拼课
- **我的**：个人信息和状态管理

#### 10.4.2 用户心理考虑
- **首页优先级**：即将成团 > 发起拼课 > 课程推荐
- **紧迫感营造**：倒计时、剩余人数、即将截止
- **信任建立**：外教资质、用户评价、退款保障
- **降低门槛**：一键操作、清晰流程、随时可退

#### 10.4.3 业务目标导向
- **提高参团率**：通过首页"即将成团"创造紧迫感
- **增加发起率**：醒目的发起拼课入口和简化流程
- **建立信任**：完整的课程和外教信息展示
- **用户留存**：积分系统和个人中心功能

### 10.5 与现有代码的对应关系

基于当前项目结构，TabBar页面对应关系：

```
当前页面结构 → 新TabBar设计
├── pages/home/home → Tab1: 首页 (重新设计)
├── pages/course-list/index → Tab2: 拼课 (重新定位)
├── pages/discover/index → Tab3: 课程 (重新设计)
└── pages/usercenter/index → Tab4: 我的 (保持)
```

**主要调整：**
1. **首页**：从简单展示改为"一键参团+发起拼课+推荐"三层结构
2. **拼课页**：从course-list改为专注拼团需求的展示
3. **课程页**：从discover改为专注课程产品的展示
4. **我的页**：保持现有结构，增加积分中心功能
